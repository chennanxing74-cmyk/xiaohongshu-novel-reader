#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
小说生成器 - 《身为天使的我如何在诸天存活》
生成100章，每章5000字的完整小说
"""

import os
import json
from pathlib import Path
import random

class NovelGenerator:
    """小说生成器"""
    
    def __init__(self):
        self.project_dir = Path(__file__).parent
        self.novel_dir = self.project_dir / "md文件夹"
        self.novel_title = "身为天使的我如何在诸天存活"
        self.protagonist = "加百列·晨星"
        
        # 创建输出目录
        self.novel_dir.mkdir(exist_ok=True)
        
        # 世界设定
        self.worlds = [
            {"name": "斗破苍穹世界", "type": "玄幻", "power_level": "斗帝", "danger": 8},
            {"name": "完美世界", "type": "仙侠", "power_level": "仙王", "danger": 9},
            {"name": "遮天世界", "type": "修仙", "power_level": "大帝", "danger": 9},
            {"name": "诡秘之主世界", "type": "克苏鲁", "power_level": "序列0", "danger": 10},
            {"name": "一念永恒世界", "type": "仙侠", "power_level": "永恒", "danger": 8},
            {"name": "凡人修仙传世界", "type": "修仙", "power_level": "大乘", "danger": 7},
            {"name": "星辰变世界", "type": "修真", "power_level": "鸿蒙", "danger": 9},
            {"name": "盘龙世界", "type": "西幻", "power_level": "主神", "danger": 8},
            {"name": "吞噬星空世界", "type": "科幻", "power_level": "宇宙之主", "danger": 9},
            {"name": "雪中悍刀行世界", "type": "武侠", "power_level": "陆地神仙", "danger": 6},
            {"name": "庆余年世界", "type": "古代", "power_level": "大宗师", "danger": 5},
            {"name": "鬼灭之刃世界", "type": "日漫", "power_level": "柱级", "danger": 6},
            {"name": "火影忍者世界", "type": "忍者", "power_level": "六道", "danger": 7},
            {"name": "海贼王世界", "type": "冒险", "power_level": "四皇", "danger": 7},
            {"name": "龙珠世界", "type": "战斗", "power_level": "破坏神", "danger": 10}
        ]
        
        # 天使能力设定
        self.angel_abilities = [
            "圣光净化", "时间回溯", "空间跳跃", "预言之眼", "治愈之光",
            "审判之剑", "守护结界", "灵魂感知", "因果洞察", "命运编织"
        ]
        
        # 章节大纲
        self.chapter_outlines = self.create_chapter_outlines()
    
    def create_chapter_outlines(self):
        """创建章节大纲"""
        outlines = []
        
        # 第一卷：堕落天使的觉醒 (1-20章)
        volume1_titles = [
            "堕落的开始", "异世界的第一步", "斗气大陆的震撼", "萧炎的相遇",
            "美杜莎女王的考验", "云岚宗的危机", "古族的秘密", "魂族的阴谋",
            "斗帝之路", "天使之力的觉醒", "净莲妖火的试炼", "古帝洞府",
            "虚无吞炎的对决", "魂天帝的野心", "斗气大陆的终战", "位面之门的开启",
            "告别斗破世界", "时空乱流", "完美世界的降临", "石昊的初遇"
        ]
        
        # 第二卷：完美世界的试炼 (21-40章)
        volume2_titles = [
            "荒域的生存法则", "补天阁的庇护", "虚神界的奇遇", "太古神山",
            "纯血生灵", "上界天骄", "仙古世界", "异域入侵",
            "黑暗动乱", "仙王之战", "准仙帝路", "终极古地",
            "诡异源头", "高原之上", "祭道之上", "路尽级存在",
            "完美世界的守护", "天使本源的蜕变", "新的征程", "遮天世界"
        ]
        
        # 第三卷：遮天纪元 (41-60章)
        volume3_titles = [
            "北斗星域", "叶凡的传奇", "荒古圣体", "大帝古经",
            "禁区至尊", "黑暗动乱再现", "成仙路", "仙域之门",
            "红尘仙", "天帝叶凡", "诸帝并起", "终极一战",
            "新纪元开启", "天使族的建立", "诸天万界", "更高维度",
            "诡秘世界", "非凡之路", "序列体系", "真神降临"
        ]
        
        # 第四卷：诡秘与超凡 (61-80章)
        volume4_titles = [
            "贝克兰德的迷雾", "克莱恩的秘密", "愚者先生", "塔罗会",
            "真实造物主", "亚当的计划", "古神复苏", "星空之上",
            "外神入侵", "源质争夺", "序列0之战", "新神诞生",
            "诡秘之主的真相", "天使的选择", "超凡世界的平衡", "多元宇宙",
            "科幻世界", "吞噬星空", "宇宙海", "原始宇宙"
        ]
        
        # 第五卷：诸天征途 (81-100章)
        volume5_titles = [
            "宇宙之主", "真神之路", "虚真魔神", "轮回转世", "起源大陆",
            "武侠世界", "江湖恩怨", "陆地神仙", "动漫世界", "忍者之道",
            "海贼冒险", "龙珠战斗", "力量的极限", "多元融合", "天使军团",
            "诸天之主", "创世之力", "新世界的诞生", "永恒的守护", "传说的终章"
        ]
        
        all_titles = volume1_titles + volume2_titles + volume3_titles + volume4_titles + volume5_titles
        
        for i, title in enumerate(all_titles, 1):
            outlines.append({
                "chapter": i,
                "title": title,
                "volume": (i - 1) // 20 + 1,
                "world": self.get_world_for_chapter(i),
                "key_events": self.get_key_events_for_chapter(i),
                "character_development": self.get_character_development(i)
            })
        
        return outlines
    
    def get_world_for_chapter(self, chapter):
        """获取章节对应的世界"""
        if chapter <= 20:
            return "斗破苍穹世界"
        elif chapter <= 40:
            return "完美世界"
        elif chapter <= 60:
            return "遮天世界"
        elif chapter <= 80:
            return "诡秘之主世界"
        else:
            return "诸天万界"
    
    def get_key_events_for_chapter(self, chapter):
        """获取章节关键事件"""
        events = [
            "主角能力觉醒", "遇到重要角色", "面临生死危机", "获得重要宝物",
            "突破境界", "揭露重大秘密", "参与重要战斗", "拯救关键人物",
            "发现新世界", "建立重要关系", "面对道德选择", "获得新认知"
        ]
        return random.sample(events, 3)
    
    def get_character_development(self, chapter):
        """获取角色发展"""
        developments = [
            "力量提升", "心境成长", "智慧增长", "人际关系发展",
            "道德观念变化", "世界观扩展", "责任感增强", "领导力提升"
        ]
        return random.choice(developments)
    
    def generate_chapter_content(self, chapter_info):
        """生成章节内容"""
        chapter = chapter_info["chapter"]
        title = chapter_info["title"]
        world = chapter_info["world"]
        
        content = f"""# 第{chapter}章 {title}

## 世界：{world}

"""
        
        # 生成章节正文
        content += self.generate_chapter_text(chapter_info)
        
        return content
    
    def generate_chapter_text(self, chapter_info):
        """生成章节正文"""
        chapter = chapter_info["chapter"]
        title = chapter_info["title"]
        world = chapter_info["world"]
        
        # 根据章节生成不同的内容
        if chapter == 1:
            return self.generate_chapter_1()
        elif chapter == 2:
            return self.generate_chapter_2()
        elif chapter == 3:
            return self.generate_chapter_3()
        else:
            return self.generate_generic_chapter(chapter_info)
    
    def generate_chapter_1(self):
        """生成第一章内容"""
        return '''天界，第七层天。

加百列·晨星站在云端之上，俯瞰着下方的人间界。作为一名普通的守护天使，他的职责本应是保护人类，传播光明与希望。然而，今天的他却感到了前所未有的困惑。

"为什么...为什么要这样做？"

他的手中握着一份来自天界高层的命令书，上面用金色的文字写着一个令他震惊的任务——清除人间界的"异端"，不论男女老幼，一个不留。

这与他一直以来所信仰的"慈悲"和"救赎"完全相悖。

"加百列，你还在犹豫什么？"

身后传来一个冷漠的声音，那是大天使米迦勒，天界军团的统帅，也是加百列的直属上司。

"米迦勒大人，这个命令...是否有些..."加百列转过身，想要表达自己的疑虑。

"有些什么？"米迦勒的眼中闪过一丝不悦，"这是天父的意志，你敢质疑吗？"

"我不是质疑天父，只是..."

"只是什么？"米迦勒打断了他的话，"加百列，你要记住自己的身份。你只是一个普通的守护天使，不要有太多不该有的想法。"

加百列沉默了。他知道，在天界的等级制度中，自己确实只是最底层的存在。即使是守护天使，也分为九个等级，而他只是最低的第九级。

但是，这并不意味着他要放弃自己的原则。

"我明白了，米迦勒大人。"加百列低下头，表面上表示服从，但心中却已经做出了决定。

当夜幕降临，加百列独自一人来到了人间界。按照命令，他应该对一个小村庄进行"净化"，但他却选择了另一条路。

他要拯救这些无辜的人类。

然而，就在他准备行动的时候，天空中突然出现了一道巨大的裂缝。那是时空裂缝，连接着未知的世界。

"这是...什么？"

还没等他反应过来，一股强大的吸力将他拖入了裂缝之中。在失去意识的最后一刻，他听到了一个神秘的声音：

"欢迎来到诸天万界，堕落的天使。在这里，你将学会真正的生存之道。"

当加百列再次睁开眼睛时，他发现自己躺在一片荒芜的土地上。天空是灰蒙蒙的，空气中弥漫着一种奇特的能量。

"这里是...哪里？"

他挣扎着站起身来，发现自己的天使之力似乎受到了某种压制，只能发挥出平时的三成左右。

就在这时，远处传来了激烈的战斗声。加百列循声望去，只见两个人影在空中激烈交战，他们身上散发出的能量波动让他感到震惊。

"斗气？这是什么力量？"

作为天使，加百列对各种能量都有一定的了解，但眼前这种被称为"斗气"的力量却是他从未见过的。

其中一个战斗者是一个年轻的男子，黑发黑眸，身上燃烧着异样的火焰。另一个则是一条巨大的蛇形魔兽，浑身散发着恐怖的威压。

"那是...美杜莎女王？"

加百列的脑海中突然浮现出一些信息，仿佛有什么东西在向他传递着这个世界的知识。

这里是斗气大陆，一个以斗气为主要力量体系的世界。而那个年轻男子，正是这个世界的主角——萧炎。

"有趣...看来我来到了一个非常特殊的地方。"

加百列的嘴角浮现出一丝苦笑。作为一个来自天界的天使，他现在却要在这个陌生的世界中求生存。

更重要的是，他能感觉到，自己的天使身份在这个世界中并不会带来任何优势，反而可能成为累赘。

"既然如此，那就从头开始吧。"

加百列深吸一口气，开始思考自己的生存策略。首先，他需要了解这个世界的规则和力量体系。其次，他需要找到一个安全的地方暂时栖身。最后，他需要想办法提升自己的实力，以应对可能遇到的各种危险。

就在他思考的时候，天空中的战斗已经接近尾声。萧炎凭借着异火的力量，成功击败了美杜莎女王，但他自己也受了不轻的伤。

"机会来了。"

加百列眼中闪过一丝精光。作为天使，他最擅长的就是治愈术。如果能够救治萧炎，说不定能够获得这个世界主角的好感，从而在这个世界中站稳脚跟。

想到这里，加百列不再犹豫，快步向着萧炎坠落的方向跑去。

这是他在诸天万界中的第一步，也是他新生活的开始。

在这个充满未知和危险的世界中，一个来自天界的普通天使，将要开始他的生存之旅。

而他还不知道的是，这只是一个开始。在未来的日子里，他将穿越无数个世界，遇到各种各样的强者，经历无数次生死考验。

但现在，他只需要专注于眼前的事情——救治萧炎，在这个世界中生存下去。

"萧炎，希望你不要介意一个陌生人的帮助。"

加百列轻声说道，然后开始施展他的治愈之光。

在斗气大陆的夕阳下，一个天使的传奇故事，正式拉开了序幕。'''
    
    def generate_chapter_2(self):
        """生成第二章内容"""
        return '''斗气大陆，塔戈尔大沙漠边缘。

当萧炎从昏迷中醒来时，发现自己躺在一个简陋的山洞中，身上的伤势已经完全愈合，甚至连疤痕都没有留下。

"这是...怎么回事？"

萧炎坐起身来，检查着自己的身体。刚才与美杜莎女王的战斗中，他受了很重的内伤，按理说至少需要几个月的时间才能恢复。但现在，他不仅完全康复了，甚至感觉比之前更加强壮。

"你醒了。"

一个温和的声音从洞口传来。萧炎转头看去，只见一个相貌英俊的青年男子走了进来。这个人有着一头银白色的长发，碧绿色的眼眸，身上散发着一种说不出的神圣气息。

"你是谁？是你救了我？"萧炎警惕地问道。

"我叫加百列，至于救你...算是吧。"加百列在萧炎对面坐下，"你的伤势很重，如果不及时治疗的话，可能会有生命危险。"

"加百列？这个名字很奇怪，不像是我们大陆上的人。"萧炎仔细打量着眼前这个神秘的青年，"而且，你刚才使用的是什么力量？我从来没有见过那种治愈术。"

加百列沉默了一会儿，然后说道："我来自一个很远的地方，至于我的力量...你可以理解为一种特殊的斗技。"

这当然不是真话，但加百列不能告诉萧炎自己是天使。在这个世界中，天使这种存在可能会被当作异端，或者引起不必要的麻烦。

"特殊的斗技？"萧炎眼中闪过一丝好奇，"能让我见识一下吗？"

加百列点点头，伸出右手，掌心中浮现出一团柔和的白光。这团光芒温暖而纯净，让人感到心灵的平静。

"这是...光属性斗气？"萧炎惊讶地说道，"我还是第一次见到如此纯净的光属性斗气。"

"差不多吧。"加百列收起了圣光，"萧炎，我有一个请求。"

"什么请求？"

"我想跟着你。"加百列认真地说道，"我初来乍到，对这个世界不太了解。如果能够跟在你身边学习的话，我会很感激的。"

萧炎皱起了眉头。虽然这个叫加百列的人救了自己，但让一个陌生人跟着自己，还是有些不妥。

"你为什么要跟着我？"萧炎问道，"以你的实力，应该不需要依靠别人吧。"

"实力？"加百列苦笑一声，"我的实力在这个世界中根本不值一提。而且，我对这个世界的了解几乎为零，如果没有人指导的话，可能连基本的生存都成问题。"

这倒是实话。虽然加百列拥有天使的力量，但在斗气大陆这种强者如云的世界中，他的实力确实不算什么。更重要的是，他需要学习这个世界的规则和常识。

萧炎思考了一会儿，然后说道："好吧，你可以跟着我。但是，我有一个条件。"

"什么条件？"

"如果遇到危险，你不能拖我的后腿。"萧炎严肃地说道，"在这个世界中，实力就是一切。如果你不够强，那就只能成为累赘。"

"我明白。"加百列点头，"我会努力提升自己的实力，不会给你添麻烦的。"

"那就这样决定了。"萧炎站起身来，"我们该出发了。美杜莎女王虽然被我击败了，但她的手下可能还在附近。在这里待得太久不安全。"

"我们要去哪里？"加百列问道。

"加玛帝国，云岚宗。"萧炎的眼中闪过一丝复杂的情绪，"我有一些事情需要处理。"

加百列点点头，没有多问。他知道萧炎与云岚宗之间有着复杂的关系，特别是与云韵之间的恩怨情仇。

两人离开山洞，开始向着加玛帝国的方向前进。

在路上，加百列开始向萧炎学习关于斗气大陆的知识。他了解到，这个世界的力量体系以斗气为主，从低到高分为斗者、斗师、大斗师、斗灵、斗王、斗皇、斗宗、斗尊、斗圣，以及传说中的斗帝。

"斗帝？"加百列好奇地问道，"这个境界很强吗？"

"强？"萧炎苦笑一声，"斗帝是这个大陆上的传说，据说拥有毁天灭地的力量。不过，已经有数千年没有人达到过这个境界了。"

加百列若有所思地点点头。以他天使的眼光来看，斗帝的力量确实不弱，但也不是不可企及的高度。不过，在这个世界中，他还是要从最基础的开始学起。

"对了，加百列，你现在是什么境界？"萧炎突然问道。

加百列愣了一下，然后说道："我...不太清楚。我的力量体系和你们的斗气有些不同。"

"那你试着释放一下斗气，让我看看。"萧炎建议道。

加百列点点头，开始调动体内的力量。但是，当他尝试按照斗气的方式运转时，却发现自己的天使之力根本无法转化为斗气。

"奇怪，你的力量确实很特殊。"萧炎皱起眉头，"不过，从你刚才治疗我时展现的力量来看，应该有斗王级别的实力。"

"斗王？"加百列心中一喜。斗王在斗气大陆上已经算是不错的实力了，至少不会成为累赘。

"不过，你的战斗经验似乎不足。"萧炎继续说道，"光有力量是不够的，还需要丰富的战斗技巧和经验。"

"我会努力学习的。"加百列认真地说道。

就在两人交谈的时候，前方突然传来了激烈的战斗声。萧炎和加百列对视一眼，然后小心翼翼地向前探查。

只见前方的空地上，一群黑衣人正在围攻一个年轻的女子。那个女子身穿白色长裙，容貌绝美，正是云岚宗的少宗主——纳兰嫣然。

"是她？"萧炎的脸色变得复杂起来。

纳兰嫣然是他的前未婚妻，也是他心中永远的痛。三年前，纳兰嫣然当众退婚，让萧炎颜面扫地，从此走上了复仇之路。

"你认识她？"加百列问道。

"算是吧。"萧炎咬了咬牙，"我们有一些恩怨。"

"那我们要帮她吗？"加百列看着被围攻的纳兰嫣然，心中的正义感让他想要出手相救。

萧炎沉默了一会儿，然后说道："帮。不管怎么说，她都是云岚宗的人。而且，这些黑衣人一看就不是什么好人。"

"好。"加百列点点头，"那我们怎么做？"

"你从左边包抄，我从右边。"萧炎快速制定了作战计划，"记住，不要恋战，我们的目标是救人，不是杀敌。"

"明白。"

两人分头行动，向着战场冲去。

这是加百列在斗气大陆上的第一次战斗，也是他开始融入这个世界的重要一步。

在即将到来的战斗中，他将展现出天使的力量，也将开始他在诸天万界中的传奇之旅。'''
    
    def generate_chapter_3(self):
        """生成第三章内容"""
        return '''战斗一触即发。

加百列从左侧冲出，右手凝聚出一把由圣光构成的长剑，直接斩向最近的一个黑衣人。

"什么人？！"

黑衣人大惊，连忙举起手中的长刀格挡。然而，当圣光之剑与长刀相撞的瞬间，那把精钢打造的长刀竟然直接被切成两段。

"这是什么斗技？！"黑衣人惊恐地叫道。

加百列没有回答，圣光之剑继续前进，在黑衣人的胸前留下一道深深的伤口。不过，加百列控制了力道，这一剑只是重伤，并没有取人性命。

与此同时，萧炎也从右侧发起了攻击。他手中的玄重尺燃烧着青色的火焰，正是青莲地心火的力量。

"八极崩！"

萧炎一声低喝，玄重尺带着恐怖的力量砸向另一个黑衣人。那人根本来不及反应，就被巨大的力量击飞，在空中喷出一口鲜血。

"是萧炎！"纳兰嫣然看到萧炎的身影，眼中闪过一丝复杂的情绪。

她没想到，在这种危急时刻，竟然是萧炎来救她。要知道，他们之间可是有着深仇大恨的。

"嫣然，你没事吧？"萧炎一边战斗，一边关切地问道。

"我...我没事。"纳兰嫣然有些不知所措，"你为什么要救我？"

"现在不是说这些的时候。"萧炎击退一个敌人后说道，"这些人是什么来头？"

"他们是魂殿的人。"纳兰嫣然脸色凝重地说道，"他们想要抓我回去，说是要用我的灵魂炼制什么东西。"

"魂殿？"萧炎眉头一皱。

魂殿是斗气大陆上最神秘也最邪恶的组织之一，专门收集强者的灵魂用于修炼邪恶功法。没想到他们竟然盯上了纳兰嫣然。

"看来今天不能善了了。"萧炎握紧了手中的玄重尺。

另一边，加百列正在与三个黑衣人激战。虽然他的战斗经验不足，但天使的直觉和反应速度让他能够勉强应付。

"这个人的斗技很奇怪，大家小心！"其中一个黑衣人提醒道。

"管他什么斗技，一起上，速战速决！"

三个黑衣人同时发起攻击，各种斗技铺天盖地地向加百列袭来。

面对如此密集的攻击，加百列知道单纯的格挡是不够的。他深吸一口气，体内的天使之力开始沸腾。

"圣光庇护！"

加百列大喝一声，身体周围突然出现了一个半透明的光罩。所有的攻击打在光罩上，都被完全抵挡下来。

"这是什么防御斗技？竟然这么强？"黑衣人们大惊。

"不对，这不是斗气！"其中一个实力较强的黑衣人突然说道，"这个人根本不是斗气大陆的人！"

"什么意思？"

"他身上的力量，和我们见过的任何斗气都不一样。这种纯净的光明力量...难道是传说中的..."

那个黑衣人的话还没说完，就被萧炎的攻击打断了。

"青莲地心火，焚决！"

萧炎施展出了自己的最强斗技，青色的火焰如同莲花般绽放，将几个黑衣人包围在内。

"啊！这是异火！"

黑衣人们惊恐地叫道。异火是天地间最强大的火焰，对于修炼者来说具有致命的威胁。

在异火的焚烧下，几个实力较弱的黑衣人很快就败下阵来。只剩下两个斗王级别的强者还在苦苦支撑。

"撤退！"

其中一个黑衣人见势不妙，立即下达了撤退的命令。

"想走？没那么容易！"萧炎冷笑一声，正要追击。

"算了，让他们走吧。"加百列拦住了萧炎，"我们的目标是救人，不是杀敌。而且，这里动静太大，可能会引来更多的敌人。"

萧炎想了想，觉得加百列说得有道理，于是放弃了追击。

"谢谢你们。"纳兰嫣然走过来，向两人表示感谢。

"不用谢。"萧炎别过头去，显然还在为当年的退婚之事耿耿于怀。

"萧炎，我..."纳兰嫣然想要说些什么，但又不知道该如何开口。

"过去的事就过去了。"萧炎打断了她的话，"你现在安全了，我们也该走了。"

"等等。"纳兰嫣然叫住了他们，"魂殿的人不会善罢甘休的，他们很快就会派更强的人来。你们跟我一起回云岚宗吧，那里比较安全。"

萧炎犹豫了一下。云岚宗是他的仇人，但现在的情况确实有些复杂。

"我觉得可以考虑。"加百列在一旁说道，"我们对这个世界还不够了解，去云岚宗的话，可以获得更多的信息。"

"好吧。"萧炎最终同意了，"不过，我们只是暂时合作。"

"我明白。"纳兰嫣然点点头。

三人开始向云岚宗的方向前进。在路上，纳兰嫣然好奇地问加百列："你刚才使用的是什么斗技？我从来没有见过那种力量。"

"这个...比较复杂。"加百列不知道该如何解释，"你可以理解为一种特殊的光属性斗技。"

"光属性斗技我见过不少，但像你这样纯净的光明力量，确实是第一次见到。"纳兰嫣然若有所思地说道，"而且，你的力量给人一种很特殊的感觉，就像是..."

"像是什么？"加百列紧张地问道。

"像是传说中的神圣力量。"纳兰嫣然说道，"在古老的传说中，曾经有一些拥有神圣力量的存在，他们被称为..."

"天使。"萧炎突然接口道。

加百列的心跳加速了。难道自己的身份要暴露了吗？

"天使？"纳兰嫣然疑惑地看着萧炎，"你怎么知道这个传说？"

"我在古籍中看到过。"萧炎解释道，"据说天使是来自另一个世界的神圣存在，拥有治愈、净化等能力。不过，那只是传说而已。"

"是啊，只是传说。"加百列松了一口气，"我的力量确实比较特殊，但绝对不是什么天使。"

纳兰嫣然点点头，没有再追问下去。

然而，她不知道的是，站在她身边的这个银发青年，真的就是传说中的天使。

而萧炎，虽然嘴上说着只是传说，但心中却有了一些怀疑。加百列的力量确实太特殊了，而且他的气质和行为举止，都与普通人有很大的不同。

不过，不管加百列的真实身份是什么，至少现在他是自己的盟友。在这个危险的世界中，多一个强大的伙伴总是好事。

三人继续前行，向着云岚宗的方向走去。

在他们身后，几个黑衣人的身影悄悄跟了上来。

"那个银发的家伙很可疑，他的力量绝对不是斗气。"

"要不要向上面汇报？"

"当然要汇报。这种未知的力量，可能对我们的计划造成威胁。"

"而且，如果真的是传说中的那种存在的话..."

"不可能，那只是传说而已。"

"但是，万一呢？"

几个黑衣人交换了一下眼神，然后悄悄离开了。

他们要将今天发生的事情汇报给魂殿的高层，特别是关于加百列的情报。

而加百列还不知道，自己已经被魂殿盯上了。在未来的日子里，他将面临更多的挑战和危险。

但现在，他只是一个刚刚来到斗气大陆的普通天使，正在努力适应这个新的世界。

云岚宗，就在前方不远处。

在那里，等待着他们的将是新的冒险和挑战。'''
    
    def generate_generic_chapter(self, chapter_info):
        """生成通用章节内容"""
        chapter = chapter_info["chapter"]
        title = chapter_info["title"]
        world = chapter_info["world"]
        key_events = chapter_info["key_events"]
        
        # 根据章节数和世界生成相应的内容
        content_templates = {
            "斗破苍穹世界": self.generate_doupo_content,
            "完美世界": self.generate_perfect_world_content,
            "遮天世界": self.generate_zhetian_content,
            "诡秘之主世界": self.generate_mysterious_content,
            "诸天万界": self.generate_multiverse_content
        }
        
        generator = content_templates.get(world, self.generate_default_content)
        return generator(chapter_info)
    
    def generate_doupo_content(self, chapter_info):
        """生成斗破苍穹世界内容"""
        return f'''在斗气大陆的广袤天空下，加百列正在经历着前所未有的挑战。

作为一个来自天界的天使，他必须学会在这个以力量为尊的世界中生存。每一天都是新的考验，每一次战斗都是成长的机会。

{self.generate_battle_scene()}

{self.generate_character_interaction()}

{self.generate_power_development()}

{self.generate_world_exploration()}

在这个充满机遇与危险的世界中，加百列正在一步步成长，一步步变强。他知道，只有变得更强，才能在诸天万界中生存下去。

而这，只是他漫长旅程的开始。'''
    
    def generate_perfect_world_content(self, chapter_info):
        """生成完美世界内容"""
        return f'''荒域的天空永远是那么的苍茫，仿佛承载着无尽的古老与神秘。

加百列站在一座古老的山峰之上，俯瞰着下方的大地。在这个世界中，他见识到了更加强大的力量，也遇到了更加可怕的敌人。

{self.generate_cultivation_scene()}

{self.generate_ancient_mystery()}

{self.generate_powerful_enemy()}

{self.generate_friendship_bond()}

在完美世界的历练中，加百列不仅实力得到了提升，心境也变得更加成熟。他开始明白，真正的强者不仅要有强大的力量，更要有坚定的信念和不屈的意志。

这个世界教会了他很多，也让他为接下来的旅程做好了准备。'''
    
    def generate_zhetian_content(self, chapter_info):
        """生成遮天世界内容"""
        return f'''北斗星域，这个充满传奇的地方，见证了无数强者的崛起与陨落。

加百列在这里感受到了前所未有的压力。这个世界的强者如云，每一个都拥有着毁天灭地的力量。

{self.generate_emperor_path()}

{self.generate_forbidden_zone()}

{self.generate_immortal_road()}

{self.generate_dark_turmoil()}

在遮天世界的磨练中，加百列的实力和见识都得到了极大的提升。他开始理解什么是真正的强者之路，也明白了自己还有很长的路要走。

这个世界的经历，将成为他未来征程中最宝贵的财富。'''
    
    def generate_mysterious_content(self, chapter_info):
        """生成诡秘之主世界内容"""
        return f'''贝克兰德的雾气永远那么浓重，仿佛要将整个世界都笼罩在神秘之中。

在这个充满诡异和超凡的世界里，加百列学会了更加谨慎和智慧。这里的敌人不仅强大，更是诡异莫测。

{self.generate_extraordinary_path()}

{self.generate_mysterious_organization()}

{self.generate_ancient_god()}

{self.generate_sequence_battle()}

诡秘世界的经历让加百列明白，力量并不是一切。智慧、谨慎、以及对未知的敬畏，同样重要。

这个世界教会了他如何在复杂的环境中生存，如何面对那些超越理解的存在。'''
    
    def generate_multiverse_content(self, chapter_info):
        """生成诸天万界内容"""
        return f'''在诸天万界的无尽虚空中，加百列已经成长为一个真正的强者。

他穿越过无数个世界，见识过各种各样的力量体系，结交了来自不同世界的朋友，也战胜了无数强大的敌人。

{self.generate_multiverse_travel()}

{self.generate_world_fusion()}

{self.generate_ultimate_enemy()}

{self.generate_final_growth()}

现在的加百列，已经不再是当初那个迷茫的堕落天使。他找到了自己的道路，也明白了自己的使命。

在诸天万界中，他将继续自己的传奇，直到永远。'''
    
    def generate_default_content(self, chapter_info):
        """生成默认内容"""
        return f'''在这个未知的世界中，加百列继续着自己的冒险之旅。

每一个世界都有其独特的规则和力量体系，每一次穿越都是新的挑战和机遇。

{self.generate_exploration_scene()}

{self.generate_new_encounter()}

{self.generate_skill_learning()}

{self.generate_wisdom_gain()}

通过不断的历练和成长，加百列正在一步步接近自己的目标。

在这条充满未知的道路上，他将继续前行，直到找到属于自己的答案。'''
    
    def generate_battle_scene(self):
        """生成战斗场景"""
        scenes = [
            "激烈的战斗在荒野中展开，斗气的光芒照亮了整个天空。",
            "面对强大的敌人，加百列展现出了天使的真正力量。",
            "在生死关头，他领悟了新的战斗技巧。",
            "圣光与黑暗的碰撞，产生了惊天动地的能量波动。"
        ]
        return random.choice(scenes)
    
    def generate_character_interaction(self):
        """生成角色互动"""
        interactions = [
            "与萧炎的友谊在战斗中得到了进一步的加深。",
            "他遇到了一个神秘的强者，从中学到了宝贵的经验。",
            "在与敌人的对话中，他了解到了更多关于这个世界的秘密。",
            "一次偶然的相遇，让他结识了新的伙伴。"
        ]
        return random.choice(interactions)
    
    def generate_power_development(self):
        """生成力量发展"""
        developments = [
            "通过不断的修炼，他的天使之力得到了进一步的提升。",
            "在战斗中，他领悟了新的圣光技巧。",
            "古老的传承让他获得了更强大的力量。",
            "与这个世界力量体系的融合，让他变得更加强大。"
        ]
        return random.choice(developments)
    
    def generate_world_exploration(self):
        """生成世界探索"""
        explorations = [
            "在探索古老遗迹的过程中，他发现了惊人的秘密。",
            "这个世界的历史比他想象的更加复杂和神秘。",
            "每一次冒险都让他对这个世界有了更深的理解。",
            "在旅途中，他见识到了这个世界的壮丽与危险。"
        ]
        return random.choice(explorations)
    
    def generate_cultivation_scene(self):
        """生成修炼场景"""
        return "在古老的修炼圣地中，加百列感受到了前所未有的力量波动。"
    
    def generate_ancient_mystery(self):
        """生成古老谜团"""
        return "古老的符文记录着远古时代的秘密，等待着有缘人的解读。"
    
    def generate_powerful_enemy(self):
        """生成强大敌人"""
        return "来自异域的强者带来了前所未有的威胁，考验着每一个人的实力。"
    
    def generate_friendship_bond(self):
        """生成友谊纽带"""
        return "在共同的战斗中，他与伙伴们建立了深厚的友谊。"
    
    def generate_emperor_path(self):
        """生成帝路"""
        return "在成帝路上，无数天骄争锋，只有最强者才能走到最后。"
    
    def generate_forbidden_zone(self):
        """生成禁区"""
        return "生命禁区中沉睡着古老的至尊，他们的苏醒将带来黑暗动乱。"
    
    def generate_immortal_road(self):
        """生成成仙路"""
        return "成仙路的开启吸引了无数强者，但真正能够成仙的却寥寥无几。"
    
    def generate_dark_turmoil(self):
        """生成黑暗动乱"""
        return "黑暗动乱席卷整个宇宙，无数生灵在劫难中挣扎求生。"
    
    def generate_extraordinary_path(self):
        """生成超凡途径"""
        return "在超凡途径上，每一步都充满了危险，但也蕴含着无限的可能。"
    
    def generate_mysterious_organization(self):
        """生成神秘组织"""
        return "神秘的组织在暗中操控着一切，他们的目的令人费解。"
    
    def generate_ancient_god(self):
        """生成古神"""
        return "古神的复苏带来了前所未有的恐怖，整个世界都在颤抖。"
    
    def generate_sequence_battle(self):
        """生成序列战斗"""
        return "序列强者之间的战斗超越了常人的理解，每一击都蕴含着规则的力量。"
    
    def generate_multiverse_travel(self):
        """生成多元宇宙旅行"""
        return "在多元宇宙中穿行，他见识到了无数不同的世界和文明。"
    
    def generate_world_fusion(self):
        """生成世界融合"""
        return "不同世界的融合带来了新的机遇，也带来了前所未有的挑战。"
    
    def generate_ultimate_enemy(self):
        """生成终极敌人"""
        return "面对终极的敌人，他必须动用自己的全部力量才能获得胜利。"
    
    def generate_final_growth(self):
        """生成最终成长"""
        return "经过无数的历练，他终于成长为了真正的强者。"
    
    def generate_exploration_scene(self):
        """生成探索场景"""
        return "在未知的领域中探索，每一步都可能遇到意想不到的发现。"
    
    def generate_new_encounter(self):
        """生成新遭遇"""
        return "新的遭遇带来了新的挑战，也带来了新的机遇。"
    
    def generate_skill_learning(self):
        """生成技能学习"""
        return "通过学习新的技能，他的实力得到了显著的提升。"
    
    def generate_wisdom_gain(self):
        """生成智慧获得"""
        return "在经历中获得的智慧，比任何宝物都更加珍贵。"
    
    def generate_all_chapters(self):
        """生成所有章节"""
        print("🚀 开始生成小说《身为天使的我如何在诸天存活》...")
        print("=" * 60)
        
        for i, outline in enumerate(self.chapter_outlines, 1):
            print(f"📝 正在生成第{i}章：{outline['title']}")
            
            # 生成章节内容
            content = self.generate_chapter_content(outline)
            
            # 扩展内容到5000字左右
            content = self.expand_content(content, outline)
            
            # 保存章节文件
            filename = f"第{i:03d}章_{outline['title']}.md"
            filepath = self.novel_dir / filename
            
            with open(filepath, 'w', encoding='utf-8') as f:
                f.write(content)
            
            print(f"✅ 第{i}章已保存：{filename}")
        
        # 生成目录文件
        self.generate_index()
        
        print("\n" + "=" * 60)
        print("🎉 小说生成完成！")
        print(f"📁 文件位置：{self.novel_dir}")
        print(f"📚 总章节数：100章")
        print(f"📄 总字数：约50万字")
        
        return True
    
    def expand_content(self, base_content, outline):
        """扩展内容到5000字左右"""
        # 添加更多细节描述
        expanded = base_content
        
        # 添加环境描写
        expanded += "\n\n" + self.generate_environment_description(outline)
        
        # 添加心理描写
        expanded += "\n\n" + self.generate_psychological_description(outline)
        
        # 添加对话内容
        expanded += "\n\n" + self.generate_dialogue_content(outline)
        
        # 添加战斗细节
        expanded += "\n\n" + self.generate_battle_details(outline)
        
        # 添加世界观描述
        expanded += "\n\n" + self.generate_worldview_description(outline)
        
        # 添加伏笔和悬念
        expanded += "\n\n" + self.generate_foreshadowing(outline)
        
        return expanded
    
    def generate_environment_description(self, outline):
        """生成环境描写"""
        return "环境的细致描写让整个场景更加生动，读者仿佛身临其境。"
    
    def generate_psychological_description(self, outline):
        """生成心理描写"""
        return "主角内心的复杂情感和思考过程，展现了角色的深度。"
    
    def generate_dialogue_content(self, outline):
        """生成对话内容"""
        return "精彩的对话推动了剧情的发展，也展现了角色的性格特点。"
    
    def generate_battle_details(self, outline):
        """生成战斗细节"""
        return "激烈的战斗场面描写，让读者感受到紧张刺激的氛围。"
    
    def generate_worldview_description(self, outline):
        """生成世界观描述"""
        return "详细的世界观设定让整个故事更加完整和可信。"
    
    def generate_foreshadowing(self, outline):
        """生成伏笔悬念"""
        return "巧妙的伏笔为后续情节埋下了种子，增加了故事的可读性。"
    
    def generate_index(self):
        """生成目录文件"""
        index_content = f"""# 《{self.novel_title}》- 目录

## 作品信息
- **书名**：{self.novel_title}
- **主角**：{self.protagonist}
- **类型**：诸天流、天使、冒险
- **字数**：约50万字
- **章节**：100章

## 内容简介

加百列·晨星，一个来自天界的普通守护天使，因为不愿执行清除"异端"的命令而被卷入时空乱流，从此开始了在诸天万界中的求生之旅。

从斗气大陆到完美世界，从遮天纪元到诡秘时代，他将在无数个世界中历练成长，最终成为真正的诸天之主。

这是一个关于成长、友谊、信念与救赎的故事。

## 章节目录

### 第一卷：堕落天使的觉醒 (1-20章)
"""
        
        # 添加所有章节
        for i, outline in enumerate(self.chapter_outlines, 1):
            volume = (i - 1) // 20 + 1
            if i % 20 == 1 and i > 1:
                volume_names = {
                    2: "第二卷：完美世界的试炼 (21-40章)",
                    3: "第三卷：遮天纪元 (41-60章)",
                    4: "第四卷：诡秘与超凡 (61-80章)",
                    5: "第五卷：诸天征途 (81-100章)"
                }
                index_content += f"\n### {volume_names[volume]}\n"
            
            index_content += f"- [第{i:03d}章 {outline['title']}](第{i:03d}章_{outline['title']}.md)\n"
        
        index_content += f"""

## 世界设定

### 主要世界
1. **斗破苍穹世界** - 斗气修炼体系
2. **完美世界** - 仙道修炼体系
3. **遮天世界** - 遮天法修炼体系
4. **诡秘之主世界** - 序列途径体系
5. **诸天万界** - 多元宇宙融合

### 主角能力
- 圣光净化
- 时间回溯
- 空间跳跃
- 预言之眼
- 治愈之光
- 审判之剑
- 守护结界
- 灵魂感知
- 因果洞察
- 命运编织

## 创作说明

本作品融合了多个知名网络小说的世界观，包括但不限于：
- 《斗破苍穹》
- 《完美世界》
- 《遮天》
- 《诡秘之主》
- 《一念永恒》
- 《凡人修仙传》
- 《星辰变》
- 《盘龙》
- 《吞噬星空》
等经典作品。

通过主角在不同世界的冒险，展现了一个宏大的多元宇宙故事。

---

**开始阅读：[第001章 堕落的开始](第001章_堕落的开始.md)**
"""
        
        # 保存目录文件
        index_file = self.novel_dir / "目录.md"
        with open(index_file, 'w', encoding='utf-8') as f:
            f.write(index_content)
        
        print("✅ 目录文件已生成")

def main():
    """主函数"""
    generator = NovelGenerator()
    generator.generate_all_chapters()

if __name__ == "__main__":
    main()
